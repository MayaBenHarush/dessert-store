// public/assets/translations.js - ××¢×¨×›×ª ×ª×¨×’×•××™× ×’×œ×•×‘×œ×™×ª

window.Translations = {
  // ×˜×§×¡×˜×™× ×›×œ×œ×™×™×
  general: {
    he: {
      // × ×™×•×•×˜
      store: '×—× ×•×ª',
      cart: '×¡×œ ×”×§× ×™×•×ª',
      checkout: '×ª×©×œ×•×',
      myPurchases: '×”×¨×›×™×©×•×ª ×©×œ×™',
      readme: 'ğŸ“– README',
      login: '×”×ª×—×‘×¨×•×ª',
      register: '×”×¨×©××”',
      logout: '×”×ª× ×ª×§×•×ª',
      admin: '× ×™×”×•×œ',
      
      // ×›×¤×ª×•×¨×™× ×•×¤×¢×•×œ×•×ª
      addToCart: '×”×•×¡×£ ×œ×¡×œ',
      removeAll: '×”×¡×¨ ×”×›×œ',
      pay: '×©×œ×',
      proceedToPay: '×”××©×š ×œ×ª×©×œ×•×',
      
      // ×”×•×“×¢×•×ª
      addedToCart: '×”×ª×•×•×¡×£ ×œ×¡×œ ×”×§× ×™×•×ª',
      errorAddingToCart: '×©×’×™××” ×‘×”×•×¡×¤×” ×œ×¡×œ',
      errorRemoving: '×©×’×™××” ×‘×”×¡×¨×”',
      errorAdding: '×©×’×™××” ×‘×”×•×¡×¤×”',
      cartEmpty: '×”×¡×œ ×¨×™×§.',
      noItemsPending: '××™×Ÿ ×¤×¨×™×˜×™× ×××ª×™× ×™× ×œ×ª×©×œ×•×.',
      noPurchasesYet: '××™×Ÿ ×¨×›×™×©×•×ª ×¢×“×™×™×Ÿ.',
      
      // ×˜×¤×¡×™×
      username: '×©× ××©×ª××©',
      password: '×¡×™×¡××”',
      rememberMe: '×–×›×•×¨ ××•×ª×™',
      searchPlaceholder: '×—×¤×© ×§×™× ×•×—...',
      
      // × ×•×©× ×•×©×¤×”
      themeToggleDark: 'ğŸŒ™ ××¦×‘ ×›×”×”',
      themeToggleLight: 'â˜€ï¸ ××¦×‘ ×‘×”×™×¨',
      languageToggle: 'ğŸŒ English',
      
      // ×“×£ ×ª×©×œ×•×
      cardNumber: '××¡×¤×¨ ×”×›×¨×˜×™×¡',
      cardName: '×©× ×‘×¢×œ/×ª ×”×›×¨×˜×™×¡',
      expiry: '×ª×•×§×£ (MM/YY)',
      cvv: 'CVV',
      paymentDemo: '×–×”×• ×ª×©×œ×•× ×“××• â€“ ××™×Ÿ ×©××™×¨×” ×©×œ ×¤×¨×˜×™ ×›×¨×˜×™×¡.',
      processing: '××¢×‘×“ ×ª×©×œ×•×...',
      
      // ×›××•×™×•×ª
      quantity: '×›××•×ª',
      
      // ×“×£ admin
      addProduct: '×”×•×¡×£ ××•×¦×¨',
      removeProduct: '××—×§',
      productTitle: '×›×•×ª×¨×ª ×”××•×¦×¨',
      description: '×ª×™××•×¨',
      image: '×ª××•× ×”',
      
      // ×›×•×ª×¨×•×ª ×“×¤×™×
      pageTitle: {
        store: '×—× ×•×ª ×§×™× ×•×—×™× ğŸ°',
        cart: '×¡×œ ×”×§× ×™×•×ª',
        checkout: '×‘×—×™×¨×ª ×¤×¨×™×˜×™× ×œ×ª×©×œ×•×',
        pay: '×ª×©×œ×•× (×“××•)',
        myitems: '×”×¨×›×™×©×•×ª ×©×œ×™',
        login: '×”×ª×—×‘×¨×•×ª',
        register: '×”×¨×©××”',
        admin: '××¡×š × ×™×”×•×œ',
        thankyou: '×ª×•×“×”! ×”×ª×©×œ×•× ×”×ª×§×‘×œ âœ…'
      },

      // ×“×£ ×ª×•×“×”
      viewMyPurchases: '×¦×¤×™×™×” ×‘×¨×›×™×©×•×ª ×©×œ×™',
      continueShopping: '×œ×”××©×™×š ×œ×§× ×•×ª'
    },
    
    en: {
      // Navigation
      store: 'Store',
      cart: 'Shopping Cart',
      checkout: 'Checkout',
      myPurchases: 'My Purchases',
      readme: 'ğŸ“– README',
      login: 'Login',
      register: 'Register',
      logout: 'Logout',
      admin: 'Admin',
      
      // Buttons and actions
      addToCart: 'Add to Cart',
      removeAll: 'Remove All',
      pay: 'Pay',
      proceedToPay: 'Proceed to Pay',
      
      // Messages
      addedToCart: 'added to cart',
      errorAddingToCart: 'Error adding to cart',
      errorRemoving: 'Error removing',
      errorAdding: 'Error adding',
      cartEmpty: 'Cart is empty.',
      noItemsPending: 'No items pending payment.',
      noPurchasesYet: 'No purchases yet.',
      
      // Forms
      username: 'Username',
      password: 'Password',
      rememberMe: 'Remember me',
      searchPlaceholder: 'Search dessert...',
      
      // Theme and language
      themeToggleDark: 'ğŸŒ™ Dark Mode',
      themeToggleLight: 'â˜€ï¸ Light Mode',
      languageToggle: 'ğŸŒ ×¢×‘×¨×™×ª',
      
      // Payment page
      cardNumber: 'Card Number',
      cardName: 'Cardholder Name',
      expiry: 'Expiry (MM/YY)',
      cvv: 'CVV',
      paymentDemo: 'This is a demo payment - no card details are saved.',
      processing: 'Processing payment...',
      
      // Quantities
      quantity: 'Quantity',
      
      // Admin page
      addProduct: 'Add Product',
      removeProduct: 'Delete',
      productTitle: 'Product Title',
      description: 'Description',
      image: 'Image',
      
      // Page titles
      pageTitle: {
        store: 'Desserts Store ğŸ°',
        cart: 'Shopping Cart',
        checkout: 'Select Items for Payment',
        pay: 'Payment (Demo)',
        myitems: 'My Purchases',
        login: 'Login',
        register: 'Register',
        admin: 'Admin Panel',
        thankyou: 'Thank You! Payment Received âœ…'
      },

      // Thank you page
      viewMyPurchases: 'View My Purchases',
      continueShopping: 'Continue Shopping'
    }
  },

  // ×ª×¨×’×•××™ ××•×¦×¨×™×
  products: {
    'bagle-cookie': { he: '×¢×•×’×™×™×ª ×‘×™×™×’×œ', en: 'Bagel Cookie' },
    'caramel-cookie': { he: '×¢×•×’×™×™×ª ×§×¨××œ', en: 'Caramel Cookie' },
    'chocolate-cake': { he: '×¢×•×’×ª ×©×•×§×•×œ×“', en: 'Chocolate Cake' },
    'cookies-box': { he: '×§×•×¤×¡×ª ×¢×•×’×™×•×ª', en: 'Cookies Box' },
    'cupcakes': { he: '×§××¤×§×™×™×§×¡', en: 'Cupcakes' },
    'kinder-cookie': { he: '×¢×•×’×™×™×ª ×§×™× ×“×¨', en: 'Kinder Cookie' },
    'lotus-cookie': { he: '×¢×•×’×™×™×ª ×œ×•×˜×•×¡', en: 'Lotus Cookie' },
    'minnie-mous-cake': { he: '×¢×•×’×ª ××™× ×™ ×××•×¡', en: 'Minnie Mouse Cake' },
    'nutella-box': { he: '×§×•×¤×¡×ª × ×•×˜×œ×”', en: 'Nutella Box' },
    'nutella-cookie': { he: '×¢×•×’×™×™×ª × ×•×˜×œ×”', en: 'Nutella Cookie' },
    'orange-cake': { he: '×¢×•×’×ª ×ª×¤×•×–', en: 'Orange Cake' },
    'pizza-cookie': { he: '×¢×•×’×™×™×ª ×¤×™×¦×”', en: 'Pizza Cookie' },
    'white-chocolate-cookie': { he: '×¢×•×’×™×™×ª ×©×•×§×•×œ×“ ×œ×‘×Ÿ', en: 'White Chocolate Cookie' },
    'white-design-cake': { he: '×¢×•×’×” ×œ×‘× ×” ××¢×•×¦×‘×ª', en: 'White Design Cake' }
  },

  // ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ×œ×ª×¨×’×•×
  get: function(key, lang = null) {
    const currentLang = lang || localStorage.getItem('language') || 'he';
    const keys = key.split('.');
    let value = this.general[currentLang];
    
    for (const k of keys) {
      if (value && value[k]) {
        value = value[k];
      } else {
        return key; // ×× ×œ× × ××¦× ×ª×¨×’×•×, ××—×–×™×¨ ××ª ×”××¤×ª×—
      }
    }
    
    return value;
  },

  getProduct: function(productId, lang = null) {
    const currentLang = lang || localStorage.getItem('language') || 'he';
    return this.products[productId] ? this.products[productId][currentLang] : productId;
  }
};

// ×¤×•× ×§×¦×™×” ×’×œ×•×‘×œ×™×ª ×œ×¢×“×›×•×Ÿ ×©×¤×”
window.updateLanguage = function() {
  const currentLanguage = localStorage.getItem('language') || 'he';
  const html = document.documentElement;
  
  // ×¢×“×›×•×Ÿ ×›×™×•×•×Ÿ ×•×©×¤×”
  if (currentLanguage === 'en') {
    html.setAttribute('lang', 'en');
    html.setAttribute('dir', 'ltr');
  } else {
    html.setAttribute('lang', 'he');
    html.setAttribute('dir', 'rtl');
  }

  // ×¢×“×›×•×Ÿ ×›×œ ×”××œ×× ×˜×™× ×¢× data-key
  document.querySelectorAll('[data-key]').forEach(element => {
    const key = element.getAttribute('data-key');
    element.textContent = window.Translations.get(key);
  });

  // ×¢×“×›×•×Ÿ placeholders
  document.querySelectorAll('[data-placeholder-key]').forEach(element => {
    const key = element.getAttribute('data-placeholder-key');
    element.placeholder = window.Translations.get(key);
  });

  // ×¢×“×›×•×Ÿ title
  const titleElement = document.querySelector('title[data-page]');
  if (titleElement) {
    const page = titleElement.getAttribute('data-page');
    titleElement.textContent = window.Translations.get(`pageTitle.${page}`);
    document.title = window.Translations.get(`pageTitle.${page}`);
  }

  // ×¢×“×›×•×Ÿ ×›×¤×ª×•×¨ ×©×¤×”
  const languageToggle = document.getElementById('language-toggle');
  if (languageToggle) {
    languageToggle.textContent = window.Translations.get('languageToggle');
  }

  // ×¢×“×›×•×Ÿ ×›×¤×ª×•×¨ × ×•×©×
  const themeToggle = document.getElementById('theme-toggle');
  if (themeToggle) {
    const theme = localStorage.getItem('theme') || 'light';
    themeToggle.textContent = theme === 'dark' ? 
      window.Translations.get('themeToggleLight') : 
      window.Translations.get('themeToggleDark');
  }
};

// ×¤×•× ×§×¦×™×” ×œ×”×—×œ×¤×ª ×©×¤×”
window.toggleLanguage = function() {
  const currentLanguage = localStorage.getItem('language') || 'he';
  const newLanguage = currentLanguage === 'he' ? 'en' : 'he';
  localStorage.setItem('language', newLanguage);
  window.updateLanguage();
  
  // ××™×¨×•×¢ ××•×ª×× ×œ×”×ª×¨×¢× ×•×ª ×¢×œ ×”×—×œ×¤×ª ×©×¤×”
  window.dispatchEvent(new CustomEvent('languageChanged', { 
    detail: { language: newLanguage } 
  }));
};